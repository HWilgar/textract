function e(e){return e&&e.__esModule?e.default:e}var t=globalThis,n={},o={},r=t.parcelRequire716c;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire716c=r),(0,r.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>n,set:e=>n=e,enumerable:!0,configurable:!0});var n,o=new Map;n=function(e,t){for(var n=0;n<t.length-1;n+=2)o.set(t[n],{baseUrl:e,path:t[n+1]})}}),r("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["5SCbD","index.8888cba9.js","5ZFkQ","copy-w.315905f0.png","ctiqG","download-w2.88454de6.png","jhLjc","expand-arrows-w.79c8a13c.png","aUa2Q","minimize-arrows-w.e32ef0f5.png","liXE3","close-w.5e896fd7.png"]'));var i={};i=new URL("copy-w.315905f0.png",import.meta.url).toString();var l={};l=new URL("download-w2.88454de6.png",import.meta.url).toString();var c={};c=new URL("expand-arrows-w.79c8a13c.png",import.meta.url).toString();var a={};a=new URL("minimize-arrows-w.e32ef0f5.png",import.meta.url).toString();var d={};d=new URL("close-w.5e896fd7.png",import.meta.url).toString(),document.addEventListener("DOMContentLoaded",function(){let t,n,o,r,s,u;let m=document.querySelector("#drop-zone"),p=document.querySelector("#img-container"),g=document.querySelector("#howto-container"),f=document.querySelector("#howto-btn"),h=document.querySelector("#close-howto"),y=document.querySelector("#crop-container"),v=document.querySelector("#close-crop"),E=document.querySelector("#cropArea"),b=document.querySelector("#cropButton"),L=document.querySelectorAll(".resizeHandle"),x=!1,w=!1,S=null,C=null,q=0;function A(e){e.preventDefault(),e.stopPropagation()}function H(e){m.classList.add("dragover")}function R(e){m.classList.remove("dragover")}["dragenter","dragover","dragleave","drop"].forEach(e=>{m.addEventListener(e,A,!1)}),["dragenter","dragover"].forEach(e=>{m.addEventListener(e,H,!1)}),["dragleave","drop"].forEach(e=>{m.addEventListener(e,R,!1)}),m.addEventListener("drop",function(e){(function(e){[...e].forEach(k)})(e.dataTransfer.files)},!1),document.createElement("textarea");let _=document.querySelector("#result");function k(e){let t=new FileReader;t.onload=function(t){$(e.name,e.type,t.target.result),T()},t.readAsDataURL(e)}async function N(t,n){let o=`https://vision.googleapis.com/v1/images:annotate?key=${atob("QUl6YVN5Qnk5NjF5alNyNnVxM21RTGZKaEhzbVZVWXlTY0hFdDc4")}`,r={requests:[{image:{content:t.split(",")[1]},features:[{type:"DOCUMENT_TEXT_DETECTION"}]}]};try{let t=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),d=await t.json();if(_.innerHTML="",d.responses&&d.responses.length>0){let t=d.responses[0].textAnnotations;t&&t.length>0?function(t,n){let o=n[0].description,r=document.createElement("div");r.className="btn-wrapper";let d=function(e,t){document.querySelector(`#image${e}`).setAttribute("converted","true");let n=document.createElement("textarea");return n.innerHTML=t,n.style.resize="none",n}(t,o),s=function(t){let n=document.createElement("button");n.setAttribute("name","copy-btn"),n.setAttribute("id",`copy${t}`),n.classList.add("copy-btn","tooltip");let o=document.createElement("img");o.src=e(i),o.alt="Copy All",n.appendChild(o);let r=document.createElement("span");return r.className="tooltiptext",r.textContent="Copy",n.appendChild(r),n.addEventListener("click",function(){(function(e){let t=document.querySelector(`#textarea${e}`).value;navigator.clipboard.writeText(t).then(function(){}).catch(function(e){alert("Failed to copy text: ",e)}),function(e){let t=document.querySelector(`#copy${e}`).querySelector("img");t.className="tick-img",t.style.animation="none",t.offsetWidth,t.style.animation="checkAnimation 0.5s ease-out forwards",t.style.display="block",t.src="img/tick-w.png",setTimeout(function(e){t.src="img/copy-w.png"},1e3)}(e)})(t)}),n}(t,r),u=function(t){let n=document.createElement("button");n.setAttribute("name","dload-btn"),n.setAttribute("id",`dload${t}`),n.classList.add("download-btn","tooltip");let o=document.createElement("img");o.src=e(l),o.alt="Download Text FIle",n.appendChild(o);let r=document.createElement("span");return r.className="tooltiptext",r.textContent="Download",n.appendChild(r),n.addEventListener("click",function(){(function(e){let t=new Blob([document.querySelector(`#textarea${e}`).value],{type:"text/plain"}),n=window.URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="text_document.txt",document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(n)})(t)}),n}(t,r),m=function(t){let n=document.createElement("button");n.setAttribute("name","expand-btn"),n.setAttribute("id",`expand${t}`),n.classList.add("expand-btn","tooltip");let o=document.createElement("img");o.src=e(c),o.alt="Expand",n.appendChild(o);let r=document.createElement("span");return r.className="tooltiptext",r.textContent="Expand",n.appendChild(r),n.addEventListener("click",function(){(function(t){let n=document.querySelector(`#textarea${t}`),o=document.querySelector(`#expand${t}`),r=o.querySelector("img"),i=o.querySelector(".tooltiptext");n.scrollHeight<=n.clientHeight&&n.scrollHeight<=70||("70px"===n.style.height||""===n.style.height?(n.style.height="auto",n.style.height=n.scrollHeight+"px",r.src=e(a),i.textContent="Minimize"):(n.style.height="70px",r.src=e(c),i.textContent="Expand"))})(t)}),n}(t,r);document.querySelector(`#img-content${t}`).appendChild(d),d.id="textarea"+t,r.appendChild(u),r.appendChild(s),r.appendChild(m);let p=document.querySelector(`#file-name${t}`);p.classList.add("img-header"),p.appendChild(r),document.querySelector(`#remove${t}`).parentNode.classList.add("move-top")}(n,t):function(e){document.querySelector(`#image${e}`).setAttribute("converted","true");let t=document.createElement("span");t.textContent="No text detected.",document.querySelector(`#img-content${e}`).appendChild(t)}(n),document.querySelector("#progress-bar"+n).remove()}else _.textContent="Error processing the image."}catch(e){(function(e){document.querySelector(`#image${e}`).setAttribute("converted","true");let t=document.createElement("span");t.textContent="Failed to convert. Check Internet Connection.",document.querySelector(`#img-content${e}`).appendChild(t),document.querySelector("#progress-bar"+e).remove()})(n)}}function $(t,n,o){let r=Date.now(),i=document.createElement("div");i.id=`img-content${r}`,i.className="img-content-wrap";let l=document.createElement("img");l.className="img-selected",l.setAttribute("uploaded","true"),l.draggable=!1,l.src=o;let c=document.createElement("div");c.className="img-wrapper",c.id=`container${r}`,c.addEventListener("click",()=>(function(e){let t=document.querySelector(`#container${e}`);if(C&&C!==t)C.classList.toggle("shadow");else if(null==t)return;t.classList.add("shadow"),C=t})(r));let a=document.createElement("div"),s=document.createElement("span");a.className="file-name",a.id=`file-name${r}`;let u=t;u.length>31&&(t.lastIndexOf("."),u=t.substring(0,15)+"..."+(t.length>10?t.substring(t.length-10):"")),s.textContent=u,a.appendChild(s),i.appendChild(a);let m=document.createElement("div");m.className="img-preview",m.id=`image${r}`,m.appendChild(l),c.appendChild(m),c.appendChild(i),p.firstChild?p.insertBefore(c,p.firstChild):p.appendChild(c),function(e,t,n,o,r){let i=e.startsWith("image/"),l=document.createElement("span");if(console.log(i),i){q++;let e=document.createElement("span");e.textContent="crop",t.appendChild(e),t.classList.add("crop"),l.className="uploaded",l.textContent="File uploaded.",n.appendChild(l),t.addEventListener("click",function(){(function(e){E.style.width="75%",E.style.height="75%",E.style.left="20px",E.style.top="20px";let t=document.createElement("img");t.className="img-selected",t.setAttribute("uploaded","true"),t.draggable=!1,t.src=e,t.id="imageToCrop";let n=document.querySelector(".image-to-crop-container");n.insertBefore(t,n.firstChild),y.style.display="block"})(o)})}else console.log("invalid"),t.setAttribute("invalid","true"),l.className="error",l.textContent="Invalid file.",n.appendChild(l)}(n,m,i,o,0);let g=function(t){let n=document.createElement("button");n.setAttribute("name","remove-btn"),n.setAttribute("id",`remove${t}`),n.classList.add("remove-btn","tooltip");let o=document.createElement("img");o.src=e(d),o.alt="Remove file",n.appendChild(o);let r=document.createElement("span");r.className="tooltiptext",r.textContent="Remove",n.appendChild(r),n.addEventListener("click",function(){(function(e){let t=document.querySelector(`#container${e}`),n=document.querySelector(`#image${e}`),o=n.getAttribute("invalid"),r=n.getAttribute("converted"),i=document.querySelector("#result");!r&&!o&&q--,t&&(null!==C&&(C.classList.remove("shadow"),C=null),t.remove()),i.textContent="",T()})(t)});let i=document.createElement("div");return i.className="remove-wrapper",i.appendChild(n),i}(r);c.appendChild(g)}function T(){let e=document.querySelector(".convert-btn"),t=e.querySelector(".tooltiptext-error");0===q?(t.classList.contains("hidden")&&t.classList.toggle("hidden"),e.disabled=!0):(e.classList.contains("hidden")&&e.classList.toggle("hidden"),t.classList.contains("hidden")||t.classList.toggle("hidden"),e.disabled=!1)}function F(){y.style.display="none";let e=document.querySelector(".image-to-crop-container"),t=document.querySelector("#imageToCrop");e.removeChild(t)}function U(e){if(w){let o=e.clientX-t,r=e.clientY-n;E.style.left=o+"px",E.style.top=r+"px"}}function D(){w=!1,document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",D)}function O(e){if(x&&S){let i=e.clientX-t,l=e.clientY-n,c=o,a=r;S.classList.contains("topLeft")?(c=o-i,a=r-l,E.style.width=c+"px",E.style.height=a+"px",E.style.left=s+i+"px",E.style.top=u+l+"px"):S.classList.contains("topRight")?(c=o+i,a=r-l,E.style.width=c+"px",E.style.height=a+"px",E.style.top=u+l+"px"):S.classList.contains("bottomLeft")?(c=o-i,a=r+l,E.style.width=c+"px",E.style.height=a+"px",E.style.left=s+i+"px"):S.classList.contains("bottomRight")&&(c=o+i,a=r+l,E.style.width=c+"px",E.style.height=a+"px")}}function j(){x=!1,S=null,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",j)}document.querySelector("#img-upload").addEventListener("change",function(e){let t=e.target.files;document.querySelector("#img-container");for(let e=0;e<t.length;e++)k(t[e])}),document.querySelector("#convert-btn").addEventListener("click",async function(){let e=document.querySelectorAll(".img-preview"),t=document.querySelector("#convert-btn"),n=t.querySelector(".convert-text");for(let o of(t.disabled=!0,n.textContent="Converting...",e)){let e=o.querySelector("img"),t=e.src;if(e&&!o.hasAttribute("converted")&&!o.hasAttribute("invalid")){q--;let e=o.id.replace("image",""),n=document.createElement("div");n.id="progress-bar"+e,n.classList.add("progress-bar");let r=document.createElement("span");r.classList.add("bar");let i=document.createElement("span");i.classList.add("progress"),r.appendChild(i),n.appendChild(r);let l=document.querySelector(`#img-content${e}`);l.querySelector(".uploaded").remove(),l.appendChild(n),await N(t,e)}}t.disabled=!1,n.textContent="Convert",T()}),f.addEventListener("click",function(){g.style.display="block"}),h.addEventListener("click",function(){g.style.display="none"}),window.addEventListener("click",function(e){e.target==g&&(g.style.display="none")}),v.addEventListener("click",function(){F()}),window.addEventListener("click",function(e){e.target==y&&F()}),E.addEventListener("mousedown",function(e){e.target===E&&(w=!0,t=e.clientX-E.offsetLeft,n=e.clientY-E.offsetTop,document.addEventListener("mousemove",U),document.addEventListener("mouseup",D))}),L.forEach(e=>{e.addEventListener("mousedown",function(e){x=!0,t=e.clientX,n=e.clientY,o=E.offsetWidth,r=E.offsetHeight,s=E.offsetLeft,u=E.offsetTop,S=this,document.addEventListener("mousemove",O),document.addEventListener("mouseup",j)})}),b.addEventListener("click",function(){let e=document.querySelector("#imageToCrop"),t=document.createElement("canvas"),n=t.getContext("2d"),o=e.naturalWidth/e.offsetWidth,r=e.naturalHeight/e.offsetHeight,i={left:(E.offsetLeft-e.offsetLeft)*o,top:(E.offsetTop-e.offsetTop)*r,width:E.offsetWidth*o,height:E.offsetHeight*r};t.width=i.width,t.height=i.height,n.drawImage(e,i.left,i.top,i.width,i.height,0,0,i.width,i.height);let l=`Crop${Date.now()}.png`,c=t.toDataURL("image/png");document.createElement("img").src=c,$(l,"image/png",c,p),T(),F()})});
//# sourceMappingURL=index.8888cba9.js.map
